<div class="min-vh-100 bg-light mt-5-c">
  <main class="container-fluid py-4">
    <div class="row justify-content-center">
      <div class="col-lg-10 col-xl-8">
        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
          <div>
            <h2 class="h4 text-dark mb-1">
              <i class="fas fa-feather-alt me-2"></i>
              {{ isEditMode ? 'Edit Journal Entry' : 'New Journal Entry' }}
            </h2>
            <p class="text-muted mb-0">
              {{ isEditMode ? 'Update your reflections' : 'Write your yoga journey reflections' }}
            </p>
          </div>
          <button type="button" class="btn btn-outline-secondary btn-sm" (click)="onCancel()">
            <i class="fas fa-arrow-left me-2"></i>Back
          </button>
        </div>

        <!-- Loading State -->
        <div *ngIf="isLoading" class="text-center py-5">
          <div class="spinner-border text-primary" role="status"></div>
          <p class="text-muted mt-2">Loading journal entry...</p>
        </div>

        <!-- Journal Writing Form - Notebook Style -->
        <form *ngIf="!isLoading" [formGroup]="journalForm" (ngSubmit)="onSubmit()" class="journal-writing-form">
          <div class="journal-form-container">
            <!-- Form Header -->
            <div class="journal-form-header">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label class="form-label journal-form-label">Entry Date</label>
                    <input type="date" formControlName="entryDate" class="form-control journal-form-input"
                           [class.is-invalid]="entryDate?.invalid && entryDate?.touched">
                    <div *ngIf="entryDate?.invalid && entryDate?.touched" class="invalid-feedback">
                      Entry date is required
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Title Section -->
            <div class="journal-form-section">
              <label class="form-label journal-form-label">Title</label>
              <input type="text" formControlName="title" class="form-control journal-form-input journal-title-input" 
                     placeholder="What's on your mind today?"
                     [class.is-invalid]="title?.invalid && title?.touched">
              <div *ngIf="title?.invalid && title?.touched" class="invalid-feedback">
                <span *ngIf="title?.errors?.['required']">Title is required</span>
                <span *ngIf="title?.errors?.['maxlength']">Title cannot exceed 200 characters</span>
              </div>
              <small class="journal-form-hint">{{ title?.value?.length || 0 }}/200 characters</small>
            </div>

            <!-- Content Section -->
            <div class="journal-form-section">
              <label class="form-label journal-form-label">Your Reflections</label>
              <textarea formControlName="content" class="form-control journal-form-input journal-content-input"
                        placeholder="Write about your practice, feelings, insights, or anything you'd like to remember..."
                        rows="12"
                        [class.is-invalid]="content?.invalid && content?.touched"></textarea>
              <div *ngIf="content?.invalid && content?.touched" class="invalid-feedback">
                Content is required
              </div>
              <small class="journal-form-hint">Take your time to reflect deeply</small>
            </div>

            <!-- Form Footer -->
            <div class="journal-form-footer">
              <!-- Error Message -->
              <div *ngIf="errorMessage" class="journal-form-error">
                <i class="fas fa-exclamation-circle me-2"></i>{{ errorMessage }}
              </div>

              <!-- Actions -->
              <div class="journal-form-actions">
                <button type="button" class="btn btn-outline-secondary btn-sm" (click)="onCancel()">
                  <i class="fas fa-times me-2"></i>Cancel
                </button>
                <button type="submit" class="btn btn-primary btn-sm"
                        [disabled]="journalForm.invalid || isSubmitting">
                  <span *ngIf="!isSubmitting">
                    <i class="fas fa-save me-2"></i>
                    {{ isEditMode ? 'Update Entry' : 'Save Entry' }}
                  </span>
                  <span *ngIf="isSubmitting">
                    <span class="spinner-border spinner-border-sm me-2" role="status"></span>
                    {{ isEditMode ? 'Updating...' : 'Saving...' }}
                  </span>
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </main>
</div>